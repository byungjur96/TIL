## 기타 오류

#### column reference is ambiguous

---

```shell
ERROR:  column reference "attribute_name" is ambiguous
```

두 개의 table에 대해 `join` 연산을 하는 경우 위와 같은 오류가 발생하는 경우가 있습니다.

table 1에 'a'라는 이름의 ID가 있고, table 2에도 'a'라는 이름의 ID가 있을 때, query의 `select`  문 안에서 'a'라는 이름의 ID를 호출하는 경우 발생합니다.

이 경우 table1의 'a'란 속성인지, table2의 'b'란 속성인지 구분해서 표시해주어야 합니다.

표시하는 방법은 아래와 같습니다.

```sql
Select Table.ID from Table Inner Join Table2 ON Table.ID=Table2.ID
```



참고 자료: <https://www.quora.com/What-does-the-SQL-ambiguous-column-name-error-mean>



#### substring

---

SQL문을 작성할 때, string의 일부분을 가지고 연산을 하는 경우 사용할 수 있는 function입니다.

`substring` function은 아래와 같은 방식으로 쓸 수 있습니다.

```sql
SELECT substring('sample_string' from 4 for 5);
```

이 SQL문은 'pl'이란 문자열을 return합니다.

parameter는 `string`, `start_pos`, `end_pos` 3개 입니다.

`string`은 일부분만 사용할 대상이 되는 string이며, 위의 문장에서는 'sample_string'이라고 할 수 있습니다.

`start_pos`는 string의 어디서부터 자를 지 결정하는 parameter입니다.

대부분의 프로그래밍 언어와 다르게 **1부터 counting을 시작**합니다.

`end_pos` 는 string을 어디까지 자를 지 결정하는 parameter입니다.

`start_pos`와 `end_pos`는 필수 parameter는 아닙니다. 

`start_pos` parameter가 생략되면 default 값은 1이 되며, `end_pos`가 생략되면 default 값은 string의 길이가 됩니다.



실제 DB를 다룰 때에는 아래와 같은 방식으로 작성할 수 있습니다.

```sql
SELECT * from <table_name> where substring(attr from 1 for 2) = 'some_string';
```

위의 SQL문은 `table_name ` 이란 table 안에  `attr_name` 이라는 속성의 앞에 2 문자를 `some_string`과 비교합니다.



<참고자료>

- <https://w3resource.com/PostgreSQL/substring-function.php>
- <https://kngt13.blog.me/80133891972>